# A2A Configuration

# Server Configuration
A2A_PORT={{ .ADL.Spec.Server.Port }}
A2A_DEBUG={{ .ADL.Spec.Server.Debug }}
A2A_AGENT_URL=http://localhost:{{ .ADL.Spec.Server.Port }}
A2A_STREAMING_STATUS_UPDATE_INTERVAL=1s

# Agent Metadata
A2A_AGENT_CARD_FILE_PATH=.well-known/agent.json

# LLM Client Configuration
{{- if .ADL.Spec.Agent }}
A2A_AGENT_CLIENT_PROVIDER={{ .ADL.Spec.Agent.Provider }}
A2A_AGENT_CLIENT_MODEL={{ .ADL.Spec.Agent.Model }}
A2A_AGENT_CLIENT_MAX_TOKENS={{ .ADL.Spec.Agent.MaxTokens }}
A2A_AGENT_CLIENT_TEMPERATURE={{ .ADL.Spec.Agent.Temperature }}
{{- if .ADL.Spec.Agent.SystemPrompt }}
A2A_AGENT_CLIENT_SYSTEM_PROMPT="{{ .ADL.Spec.Agent.SystemPrompt }}"
{{- end }}
{{- else }}
A2A_AGENT_CLIENT_PROVIDER=openai
A2A_AGENT_CLIENT_MODEL=gpt-4o-mini
A2A_AGENT_CLIENT_MAX_TOKENS=4096
A2A_AGENT_CLIENT_TEMPERATURE=0.7
{{- end }}

# LLM Provider Settings (set the appropriate one based on your provider)
A2A_AGENT_CLIENT_API_KEY=your-api-key-here
# A2A_AGENT_CLIENT_BASE_URL=https://api.openai.com/v1  # Optional: Custom endpoint

# Client Configuration
A2A_AGENT_CLIENT_TIMEOUT=30s
A2A_AGENT_CLIENT_MAX_RETRIES=3
A2A_AGENT_CLIENT_MAX_CHAT_COMPLETION_ITERATIONS=10

# Capabilities
{{- if .ADL.Spec.Capabilities }}
A2A_CAPABILITIES_STREAMING={{ .ADL.Spec.Capabilities.Streaming }}
A2A_CAPABILITIES_PUSH_NOTIFICATIONS={{ .ADL.Spec.Capabilities.PushNotifications }}
A2A_CAPABILITIES_STATE_TRANSITION_HISTORY={{ .ADL.Spec.Capabilities.StateTransitionHistory }}
{{- else }}
A2A_CAPABILITIES_STREAMING=true
A2A_CAPABILITIES_PUSH_NOTIFICATIONS=false
A2A_CAPABILITIES_STATE_TRANSITION_HISTORY=false
{{- end }}

# Task Management
A2A_TASK_RETENTION_MAX_COMPLETED_TASKS=100
A2A_TASK_RETENTION_MAX_FAILED_TASKS=50
A2A_TASK_RETENTION_CLEANUP_INTERVAL=5m

# Storage Configuration (optional)
A2A_QUEUE_PROVIDER=memory
# A2A_QUEUE_URL=redis://localhost:6379  # Required when using Redis
A2A_QUEUE_MAX_SIZE=100
A2A_QUEUE_CLEANUP_INTERVAL=30s

# Authentication (optional - OIDC)
{{- if and .ADL.Spec.Server.Auth .ADL.Spec.Server.Auth.Enabled }}
A2A_AUTH_ENABLE=true
A2A_AUTH_ISSUER_URL=https://your-oidc-provider.com
A2A_AUTH_CLIENT_ID=your-client-id
A2A_AUTH_CLIENT_SECRET=your-client-secret
{{- else }}
A2A_AUTH_ENABLE=false
{{- end }}
